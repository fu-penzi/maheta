<cdk-virtual-scroll-viewport itemSize="64" minBufferPx="200" maxBufferPx="100000">
  <ul>
    <li
      *cdkVirtualFor="let track of tracks; index as i; trackBy: trackByIndex"
      class="scroll-element"
    >
      <div class="content" (click)="playPosition(i)" mat-ripple>
        <img class="thumb" src="{{ track.thumbUrl }}" alt="{{ track.thumbUrl }}" />

        <div class="info" [class.active]="isCurrentTrack(track)">
          <span class="info__title">{{ track.title }}</span>
          <span class="info__author">{{ track.author }}</span>
        </div>
      </div>

      <div class="menu">
        <span class="menu__duration">{{ track.duration | mahetaDuration }}</span>
        <button
          mat-icon-button
          [matMenuTriggerFor]="menu"
          aria-label="Example icon button with a bookmark icon"
        >
          <mat-icon>more_vert</mat-icon>
        </button>
        <mat-menu #menu="matMenu">
          <button mat-menu-item (click)="openEditLyricsDialog(track)">
            <mat-icon>music_note</mat-icon>
            Edit lyrics
          </button>

          <ng-container *ngIf="playlist">
            <button mat-menu-item (click)="deleteFromPlaylist(track)">
              <mat-icon>delete_forever</mat-icon>
              Delete from playlist
            </button>
          </ng-container>

          <ng-container *ngIf="!playlist">
            <button mat-menu-item (click)="openAddToPlaylistDialog(track)">
              <mat-icon>playlist_add</mat-icon>
              Add to playlist
            </button>
          </ng-container>
        </mat-menu>
      </div>
    </li>
  </ul>
</cdk-virtual-scroll-viewport>
